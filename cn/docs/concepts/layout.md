---
layout: docs_cn
title: Server Layout · Docs · KBE
tab: docs
docsitem: concepts-layout
---

服务端架构
=============


服务端组成
----------------------------------

			      |----------|
			      |  client  | x N
			      |----------|

	------------------------|-----|-------------------------------

	|----------|	     |----------|         |----------|
	| loginsrv | x N     |  basesrv | x N     |basesrvmgr| x 1
	|----------|         |----------|         |----------|

	------------------------|-----|-------------------------------


		|----------|            |----------|
		|  cellsrv | x N	|cellsrvmgr| x 1
		|----------|            |----------|

	------------------------|-----|-------------------------------


		|----------|            |----------|
		|  dbmgr   | x 1	| billing  | x 1
		|----------|            |----------|

	------------------------|-----|-------------------------------

			      |----------|
			      |  mysql   | x 1
			      |----------|


服务端组件描述
----------------------------------

	· loginapp:
	client的登录验证, 验证通过则向客户端发放一个baseapp的地址， 之后客户端通过baseapp与服务端交互。
	可在多台机器部署多个loginapp进程来负载。 


	· dbmgr:
	实现数据的存取，默认使用mysql作为数据库。


	· baseappmgr:
	主要负责协调所有baseapp的工作，包括负载均衡处理等。


	· baseapp:
	客户端与服务端的交互只能通过loginapp分配的baseapp来完成。
	定时写entity的数据到数据库、 baseapp数据相互备份。
	可在多台机器部署多个baseapp进程来均衡负载。 


	· cellappmgr:
	主要负责协调所有cellapp的工作，包括负载均衡处理等。


	· cellapp:
	主要处理游戏实时逻辑， 如：aoi， navigate， ai, 休闲游戏房间内逻辑等等。
	可在多台机器部署多个cellapp进程来动态均衡负载。 


	· client:
	客户端我们将提供基础框架，这个框架不包括渲染部分和输入输出部分的具体实现, 
	我们将提供一个lib文件和一套API接口，开发者可以选择使用自己比较适合的图形渲染引擎与输入输出控制部分， 
	(目前已实现的ClientSDK版本: Unity3d、Ogre、Html5)


	· kbmachine:
	抽象出一个服务端硬件节点(一台硬件服务器只能存在一个这样的进程)。主要用途是接受远程指令处理本机上的组件启动与关闭, 
	提供本机上运行组件的接入口以及搜集当前机器上的一些信息， 
	如：CPU， 内存等。 这些信息会提供给一些对此比较感兴趣的组件。 


	· guiconsole: 
	这是一个控制台工具， 可以实时的观察服务端运行状态， 实时观测不同space中entity的动态，
	并支持动态调试服务端python逻辑层以及查看各个组件的日志，启动服务端与关闭等。 


	· messagelog: 
	收集和备份各个组件的运行日志，可使用guiconsole来查看和搜索相关信息。


[config-server]: {{ site.baseurl }}/cn/docs/configuration/kbengine_defs.html